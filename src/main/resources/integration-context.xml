<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/integration http://www.springframework.org/schema/integration/spring-integration.xsd
		http://www.springframework.org/schema/integration/http http://www.springframework.org/schema/integration/http/spring-integration-http.xsd
        http://www.springframework.org/schema/oxm http://www.springframework.org/schema/oxm/spring-oxm.xsd"
       xmlns:int="http://www.springframework.org/schema/integration"
       xmlns:oxm="http://www.springframework.org/schema/oxm"
       xmlns:int-http="http://www.springframework.org/schema/integration/http">

    <int:annotation-config/>

    <!-- Inbound/Outbound Channels -->
    <int:channel id="employeeSearchRequest" />
    <int:channel id="employeeSearchResponse" />

    <int-http:inbound-gateway id="inboundEmployeeSearchRequestGateway"
                              supported-methods="GET, POST"
                              request-channel="employeeSearchRequest"
                              reply-channel="employeeSearchResponse"
                              mapped-response-headers="Return-Status, Return-Status-Msg, HTTP_RESPONSE_HEADERS"
                              path="/api/gateway/employee/{id}/search"
                              reply-timeout="50000">

        <int-http:header name="employeeId" expression="#pathVariables.id"/>

    </int-http:inbound-gateway>

    <!--<oxm:jaxb2-marshaller id="marshaller" context-path="com.irengine.campus.web.xml" />-->

    <bean
        class="org.springframework.oxm.jaxb.Jaxb2Marshaller"
        id="marshaller">
        <property name="contextPaths">
            <list>
                <value>com.irengine.campus.web.xml</value>
            </list>
        </property>
    </bean>

    <int:service-activator id="employeeServiceActivator"
                           input-channel="employeeSearchRequest"
                           output-channel="employeeSearchResponse"
                           ref="employeeSearchService"
                           method="getEmployee"
                           requires-reply="true"
                           send-timeout="60000"/>

</beans>
